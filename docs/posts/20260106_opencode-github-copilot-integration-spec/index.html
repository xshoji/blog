<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>OpenCode の GitHub Copilot 連携機能の仕組みを読み解く（注意点あり） | xshoji's blog</title><link rel=icon type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/css/main.min.258b9005d700113c564a907f94756cd480af3a8c22677d8899bbb06d75764c89.css integrity="sha256-JYuQBdcAETxWSpB/lHVs1ICvOowiZ32ImbuwbXV2TIk=" crossorigin=anonymous><script src=/js/main.9bb57b255d451daab90a38635d9a16e73e51de496c83fe4ca2590051d38d11f8.js integrity="sha256-m7V7JV1FHaq5CjhjXZoW5z5R3klsg/5MolkAUdONEfg=" crossorigin=anonymous defer></script><script src=/js/lightbox.bc1534d02ae012fc45a8e5abd1956570e73c4619dd2d3aa46703a03833c1f068.js integrity="sha256-vBU00CrgEvxFqOWr0ZVlcOc8RhndLTqkZwOgODPB8Gg=" crossorigin=anonymous defer></script></head><body><header class="w-full p-md border-b border-border bg-surface sticky top-0 z-50 backdrop-blur bg-surface-alpha transition will-change-transform"><div class="max-w-max mx-auto flex justify-between items-center transition"><h1 class="blog-name text-lg font-sans font-semibold tracking-tight m-0 transition transform-origin-left"><a href=/ class="text-primary border-b border-transparent hover:text-accent transition">xshoji's blog</a></h1><nav class="blog-menu m-0 transition-fast"><ul class="list-none flex gap-md md:gap-lg items-center"><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-secondary border-none py-xs pb-xs relative" href=/posts/>Blog</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-secondary border-none py-xs pb-xs relative" href=/about/>About</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-secondary border-none py-xs pb-xs relative" href=/tags/>Tags</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-secondary border-none py-xs pb-xs relative" href=/search/>Search</a></li></ul></nav></div></header><main><article class="max-w-content mx-auto"><header class=mb-xl><div class="post-meta flex flex-wrap gap-xs items-center text-xs text-tertiary uppercase tracking-wider font-semibold mb-md"><time class=text-accent datetime=2026-01-07T03:10:57+09:00>2026-01-07
</time><span class="w-5 h-1px bg-border"></span>
<span class="ml-auto text-right whitespace-nowrap">8 min read</span>
<time class="flex-basis-100 text-xs text-tertiary opacity-85" datetime=2026-01-17T03:17:40+09:00>2026-01-17 <span>(updated)</span></time></div><h1 class="post-title text-2xl font-sans font-semibold leading-snug mt-xs mb-xs"><a href=https://blog.xshoji.com/posts/20260106_opencode-github-copilot-integration-spec/ class="text-primary border-b border-transparent hover:text-accent">OpenCode の GitHub Copilot 連携機能の仕組みを読み解く（注意点あり）</a></h1><div class="flex gap-xs flex-wrap"><a href=/tags/opencode/ class="text-xs px-08 py-03 bg-accent-light text-accent rounded-sm font-medium tracking-sm border-transparent transition-fast hover:bg-accent hover:text-surface hover:border-accent hover:translate-y--1">#opencode</a>
<a href=/tags/github-copilot/ class="text-xs px-08 py-03 bg-accent-light text-accent rounded-sm font-medium tracking-sm border-transparent transition-fast hover:bg-accent hover:text-surface hover:border-accent hover:translate-y--1">#github copilot</a>
<a href=/tags/oauth/ class="text-xs px-08 py-03 bg-accent-light text-accent rounded-sm font-medium tracking-sm border-transparent transition-fast hover:bg-accent hover:text-surface hover:border-accent hover:translate-y--1">#oauth</a>
<a href=/tags/zed/ class="text-xs px-08 py-03 bg-accent-light text-accent rounded-sm font-medium tracking-sm border-transparent transition-fast hover:bg-accent hover:text-surface hover:border-accent hover:translate-y--1">#zed</a></div></header><details id=TableOfContents aria-label=目次><summary><h3 class="text-sm font-semibold mt-0 mb-sm opacity-75">目次</h3></summary><nav id=TableOfContents><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#opencode-の-github-copilot-連携の仕組み>OpenCode の GitHub Copilot 連携の仕組み</a></li><li><a href=#client-id-iv1b507a08c87ecfe98-の正体を調べる>Client ID: Iv1.b507a08c87ecfe98 の正体を調べる</a></li><li><a href=#具体的にどんな問題があるのか注意点について考える>具体的にどんな問題があるのか？注意点について考える</a></li><li><a href=#そもそもなぜ3rdパーティ製ツールは独自の-github-apps-を用意しないのか>そもそもなぜ3rdパーティ製ツールは独自の GitHub Apps を用意しないのか</a></li><li><a href=#本件について指摘してる人がいました>本件について指摘してる人がいました</a></li><li><a href=#じゃあ正攻法としてはどうすればいいのか>じゃあ正攻法としてはどうすればいいのか</a></li><li><a href=#まとめ>まとめ</a></li><li><a href=#余談1>余談1</a></li><li><a href=#余談2>余談2</a></li></ul></nav></details><div class="article-content text-base leading-relaxed text-secondary"><blockquote><p>[ ! ] 2026-01-16(金) 追記</p><blockquote><p>OpenCode on X: &ldquo;OpenCode can now officially be used with your Github Copilot subscription &mldr;&rdquo;<br><a href=https://x.com/opencode/status/2011790750543983072>https://x.com/opencode/status/2011790750543983072</a></p></blockquote><p>にある通り公式に GitHub Copilot 連携がサポートされたようです。
こちらの記事は、公式連携がサポートされる前にどのように OpenCode が GitHub Copilot 連携を実現していたのかの調査の記録として残しておきます。</p></blockquote><h2 id=はじめに>はじめに</h2><p><a href=https://code.claude.com/docs/ja/overview>Claude Code</a> の OSS 版と言われている</p><blockquote><p>OpenCode | The open source AI coding agent<br><a href=https://opencode.ai/>https://opencode.ai/</a></p></blockquote><p>が話題になっています。
私は普段 GitHub Copilot を利用しているのですが、この OpenCode は GitHub Copilot との連携に対応しています。
&mldr;となると、 Claude Code を使わずとも、 OpenCode を使えば、追加料金なしで Claude Code っぽい環境を手に入れられるのでは？と思い、興味が湧きました。</p><p>ただ、利用する前に一点気になることがありました。
それは、 GitHub Copilot って 3rd パーティ製アプリに対して Copilot を使った操作の API を公開してない認識だったので、どのように連携してるんだろう？という点でした。
この部分について調べてみたところ、興味深い点と少し注意が必要な状況であることがわかったので、
今回はその内容について共有したいと思います。</p><h2 id=opencode-の-github-copilot-連携の仕組み>OpenCode の GitHub Copilot 連携の仕組み</h2><p>OpenCode の GitHub Copilot 連携の仕組みを理解するために、まずは OpenCode のソースコードを確認してみました。
以下のリポジトリに、 GitHub Copilot 連携に関するコードがありました。</p><blockquote><p>L5 - opencode-copilot-auth/index.mjs - anomalyco/opencode-copilot-auth
<a href=https://github.com/anomalyco/opencode-copilot-auth/blob/main/index.mjs#L5>https://github.com/anomalyco/opencode-copilot-auth/blob/main/index.mjs#L5</a></p></blockquote><p>ここを見ると、以下のような仕組みで GitHub Copilot との連携を実現していることが分かります。</p><div class=table-wrapper><table><thead><tr><th style=text-align:left>項目</th><th style=text-align:left>説明</th></tr></thead><tbody><tr><td style=text-align:left>連携方式</td><td style=text-align:left><a href=https://datatracker.ietf.org/doc/html/rfc8628>OAuth 2.0 Device Flow</a> による認可</td></tr><tr><td style=text-align:left>OAuth Client ID</td><td style=text-align:left><code>Iv1.b507a08c87ecfe98</code></td></tr></tbody></table></div><p>次に、連携の仕組みもう少し深く知るために、この Client ID の実態が何なのかを少し詳しく調べてみました。</p><h2 id=client-id-iv1b507a08c87ecfe98-の正体を調べる>Client ID: Iv1.b507a08c87ecfe98 の正体を調べる</h2><p>調べてみたところ、面白いことがわかりました。
この Client ID: <code>Iv1.b507a08c87ecfe98</code> の実体は</p><blockquote><p>Connection with GitHub Copilot Plugin
<a href=https://github.com/settings/connections/applications/Iv1.b507a08c87ecfe98>https://github.com/settings/connections/applications/Iv1.b507a08c87ecfe98</a></p></blockquote><p>こちらの GitHub提供の公式アプリの Client ID と一致しているようです。
この <code>GitHub Copilot Plugin</code> というのは、 Visual Studio Code や JetBrains IDE 向けの公式プラグインが利用しているアプリケーションです。</p><p>OAuthに詳しい方なら、「あれ？」と思うかもしれません。
本来であれば、OpenCode のような 3rd パーティ製アプリは、自分たちで独自に OAuth アプリケーションを GitHub 上に登録し、そのアプリケーションの Client ID を使って OAuth の認可を行うべきです。
ただし、OpenCode は、現状この <code>GitHub Copilot Plugin</code> の Client ID を流用し、あたかも自信が公式の <code>GitHub Copilot Plugin</code> であるかのようにユーザーに認可画面を表示し、 OAuth の認可を行っているようです。</p><p>GitHub.com の Applications を見ると、<code>GitHub Copilot Plugin</code> は以下のように表示されているので、 OpenCode から利用する場合の実情と比較すると乖離があるように見えますね。</p><figure><img src=/posts/20260106_opencode-github-copilot-integration-spec/data/github-copilot-plugin-owner.png width=100% height=100%></figure><h2 id=具体的にどんな問題があるのか注意点について考える>具体的にどんな問題があるのか？注意点について考える</h2><p>大前提として、この方法で OAuth の認可を行うこと自体は技術的には可能ですし、トークンが第三者に渡ったり、悪用されてしまうような心配は基本的にはありません。
ただし、以下のような注意点や問題が発生する可能性があります。</p><ul><li>Authorized OAuth Apps に認可したつもりの「 OpenCode 」のアプリが表示されない<ul><li>GitHub Copilot Plugin の Client ID を流用しているため、システム上はこの「 GitHub Copilot Plugin 」という GitHub.com 公式のツールに対して認可を与えたことになり、ユーザーが認可したはずの OpenCode のアプリは存在しない状態になります</li></ul></li><li>OpenCode への認可を単体で取り消せない<ul><li>Authorized OAuth Apps に OpenCode のアプリが存在しないため、認可を取り消したい場合は、 GitHub Copilot Plugin 全体の認可を取り消す必要があります</li></ul></li><li>GitHub.com の管理画面上で、 OpenCode へ認可を与えていることが把握できない</li><li>そもそも GitHub.com 側のポリシーに準拠してるのか曖昧<ul><li>これいいんだっけ？について <a href="https://www.reddit.com/r/GitHubCopilot/comments/1n257aa/if_you_have_gh_copilot_you_can_use_opencode_with/?tl=es-419">redditで議論されてるスレ</a> を見つけました</li></ul></li></ul><p>このため、 2026-01-07時点では、 OpenCode の GitHub Copilot 連携機能を利用する際には</p><blockquote><p>&ldquo;GitHub Copilot Plugin&rdquo; という GitHub 公式アプリに対して認可を与えた扱いになる</p></blockquote><p>という点を意識して利用する必要がありそうです。</p><h2 id=そもそもなぜ3rdパーティ製ツールは独自の-github-apps-を用意しないのか>そもそもなぜ3rdパーティ製ツールは独自の GitHub Apps を用意しないのか</h2><p>これは、 Copilot のスコープを要求する GitHub Apps を作成しようとするとすぐ気づけるのですが、
一般ユーザーは、 GitHub Apps を作成する際の Permission として、 Copilot 関連の機能をフルで使う権限を選択できないようになっています。</p><figure><img src=/posts/20260106_opencode-github-copilot-integration-spec/data/github-apps-copilot-permission.png width=100% height=100%></figure><p>OAuth Apps も同様で、Coplot に関するスコープは公開されていません。</p><blockquote><p>Scopes for OAuth apps - GitHub Docs<br><a href=https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps>https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/scopes-for-oauth-apps</a></p></blockquote><p>&mldr;ということで、GitHub Copilot と連携するための OAuth Apps や GitHub Apps を一般ユーザーが独自に作成することは現状できないために、仕方なく（半分Hack的に）公式の Client ID を流用している、というのが実情のようでした。</p><h2 id=本件について指摘してる人がいました>本件について指摘してる人がいました</h2><blockquote><p>potential misconfiguration: Copilot Auth Flow · Issue #316 · anomalyco/opencode<br><a href=https://github.com/anomalyco/opencode/issues/316>https://github.com/anomalyco/opencode/issues/316</a></p></blockquote><p>こちらの Issue では、 OpenCode の GitHub Copilot 連携機能の仕組みについて指摘がなされており、 OpenCode チームもこの点を認識しているようです。
その上、以下のようなコメントが書かれてました。</p><blockquote><p>This has to be done this way. It is actually not originating from neovim plugin but from vscode. It is just this is the standard for all tools&mldr; they all copy from vscode.</p><p>これはこの方法でやるしかないんだ。実際には neovim プラグインから来ているわけではなく、vscode から来ているんだ。ただ、これはすべてのツールの標準で&mldr; みんな vscode からコピーしているんだ。</p></blockquote><p>&mldr;え？まじ？と思いましたが、どうやら実際他の3rdパーティ製ツールも同様の方法で連携しているケースがあるようです😨</p><p><strong>CopilotChat.nvim</strong> (こちらは過去の実装でそうなってただけで現在は修正されてそうです)</p><blockquote><p>CopilotChat/config/providers.lua - CopilotC-Nvim/CopilotChat.nvim<br><a href=https://github.com/CopilotC-Nvim/CopilotChat.nvim/blob/9db5d3eaafe9fc3c91ce9ecfc416de2798982487/lua/CopilotChat/config/providers.lua#L169>https://github.com/CopilotC-Nvim/CopilotChat.nvim/blob/9db5d3eaafe9fc3c91ce9ecfc416de2798982487/lua/CopilotChat/config/providers.lua#L169</a></p></blockquote><p><strong>eclipse-github-copilot-integration</strong></p><blockquote><p>GitHubDeviceAuthService.java - masecla22/eclipse-github-copilot-integration<br><a href=https://github.com/masecla22/eclipse-github-copilot-integration/blob/2237ae268339711844d49bcdffefeb6995ecc059/src/com/github/copilot/github/GitHubDeviceAuthService.java#L65>https://github.com/masecla22/eclipse-github-copilot-integration/blob/2237ae268339711844d49bcdffefeb6995ecc059/src/com/github/copilot/github/GitHubDeviceAuthService.java#L65</a></p></blockquote><p><strong>BerriAI/litellm</strong></p><blockquote><p>github_copilot/authenticator.py - BerriAI/litellm<br><a href=https://github.com/BerriAI/litellm/blob/69aa111fddc73ab3cc18f3075e767878d48a5f36/litellm/llms/github_copilot/authenticator.py#L21>https://github.com/BerriAI/litellm/blob/69aa111fddc73ab3cc18f3075e767878d48a5f36/litellm/llms/github_copilot/authenticator.py#L21</a></p></blockquote><h2 id=じゃあ正攻法としてはどうすればいいのか>じゃあ正攻法としてはどうすればいいのか</h2><blockquote><p>github-copilot-chat - LLM Providers | Zed Code Editor Documentation<br><a href="https://zed.dev/docs/ai/llm-providers?highlight=copilot#github-copilot-chat">https://zed.dev/docs/ai/llm-providers?highlight=copilot#github-copilot-chat</a></p></blockquote><p>Zed Code Editor というエディタのドキュメントを見ると、 GitHub Copilot 連携の手順が書かれています。
こちらはオープンソースなので、実装を覗いてみましょう。</p><blockquote><p>copilot.rs - zed-industries/zed<br><a href=https://github.com/zed-industries/zed/blob/efeea7973eb2a6fcf9f60971329361832eef76c1/crates/copilot/src/copilot.rs#L1170-L1172>https://github.com/zed-industries/zed/blob/efeea7973eb2a6fcf9f60971329361832eef76c1/crates/copilot/src/copilot.rs#L1170-L1172</a></p></blockquote><p>ふむふむ、どうやら Zed Code Editor は、 GitHub.com が提供している <code>@github/copilot-language-server</code> というサーバーを利用して連携を実現しているようです。</p><blockquote><p>github/copilot-language-server-release: Feedback for the GitHub Copilot Language Server<br><a href=https://github.com/github/copilot-language-server-release>https://github.com/github/copilot-language-server-release</a></p></blockquote><p>(ちなみにこのサーバーの実装元のコードは非公開のようでした)</p><p>このサーバーを使うことで、 Zed Code Editor は正攻法で GitHub Copilot 連携を実現しているようです。</p><p>&mldr;ただ、このサーバーのREADMEを読むと、結局 <a href=https://datatracker.ietf.org/doc/html/rfc8628>OAuth 2.0 Device Flow</a> による認可を行うようです。となると、また最初の「じゃあどの OAuth Client ID を使うの？」という問題に戻ってしまいます。</p><p>幸い、このサーバーはjsで実装されてるようだったんで、DLして中身のコードを確認してみました。
その結果、なんとやっぱり最終的には</p><blockquote><p>Connection with GitHub Copilot Plugin
<a href=https://github.com/settings/connections/applications/Iv1.b507a08c87ecfe98>https://github.com/settings/connections/applications/Iv1.b507a08c87ecfe98</a></p></blockquote><p>に認可を与える形で OAuth の認可を行っていることが分かりました&mldr;😨😨😨</p><pre tabindex=0><code>[01-07 02:42:55] macbookpro copilot-language-server-js-1.406.0$ ag Iv1.b507a08c87ecfe98
main.js
...&#34;editorVersionHeaders&#34;);var gT=&#34;Iv1.b507a08c87ecfe98&#34;,zii=&#34;350ee525b5da0e4a54c6e8e043edc1b...
[01-07 02:42:59] macbookpro copilot-language-server-js-1.406.0$
</code></pre><p>このため、仮に GitHub.com の提供する <code>@github/copilot-language-server</code> を利用した方法で GitHub Copilot と連携する仕組みを実装したとしても、 認可を与えるアプリケーションは結局はみな同じ Client ID = <code>Iv1.b507a08c87ecfe98 = GitHub Copilot Plugin</code> を使って OAuth の認可を行うことになる、ということがわかりました。</p><h2 id=まとめ>まとめ</h2><p>OpenCode の GitHub Copilot 連携機能の仕組みを読み解く流れで、現状の 3rdパーティ製のツールの GitHub Copilot 連携の実装方式の実態について理解が深まりました。</p><h2 id=余談1>余談1</h2><p>ちなみに、Zed の GitHub Sign in 機能を利用してる場合</p><blockquote><p>what-features-require-signing-in - Authenticate | Zed Code Editor Documentation<br><a href=https://zed.dev/docs/authentication#what-features-require-signing-in>https://zed.dev/docs/authentication#what-features-require-signing-in</a></p></blockquote><p>Authorized GitHub Apps を見ると</p><ul><li>Zed Industries</li></ul><p>が表示されます。
このため、もし Zed の GitHub Sign in 機能を利用していて、かつ GitHub Copilot との連携も行なっている場合、
Authorized GitHub Apps を見るとぱっと見 GitHub Copilot 連携もこの「 <code>Zed Industries</code> 」のクライアントを通じて行なっているように見えてしまうなーと思いました。</p><p>実際には</p><ul><li>GitHub Copilot Plugin: Zed からの GitHub Copilot 連携 はこちらのクライアントの権限が利用される</li><li>Zed Industries: Zed のコラボレーション機能などはこちらのクライアントの権限 ( <code>read:user</code> GitHub scope ) が利用される</li></ul><p>という状態になるので、この点に注意する必要がありそうです。</p><figure><img src=/posts/20260106_opencode-github-copilot-integration-spec/data/zed-copilot-integration-01.png width=100% height=100%></figure><figure><img src=/posts/20260106_opencode-github-copilot-integration-spec/data/zed-copilot-integration-02.png width=100% height=100%></figure><figure><img src=/posts/20260106_opencode-github-copilot-integration-spec/data/zed-singin-and-copilot-integration.png width=100% height=100%></figure><h2 id=余談2>余談2</h2><p>Zed というエディタ、あまり詳しくは追ってなかったんですが</p><blockquote><p>zed-industries/zed: Code at the speed of thought – Zed is a high-performance, multiplayer code editor from the creators of Atom and Tree-sitter.<br><a href=https://github.com/zed-industries/zed>https://github.com/zed-industries/zed</a><br>─<br>Welcome to Zed, a high-performance, multiplayer code editor from the creators of Atom and Tree-sitter.</p></blockquote><p>とあるように、 今はなき Atom の開発チームが手掛けているみたいです。
で、 Atom といえば、 GitHub が Microsoft に買収された後も長らく開発が続けられていましたが、最終的には開発終了がアナウンスされました。</p><p>そして、この Zed を開発してる組織 Zed Industries に対して</p><blockquote><p>Zed Announces $10M Series A and Launches its Collaborative Code Editor<br><a href=https://www.prweb.com/releases/Zed_Announces_10M_Series_A_and_Launches_its_Collaborative_Code_Editor/prweb19217168.htm>https://www.prweb.com/releases/Zed_Announces_10M_Series_A_and_Launches_its_Collaborative_Code_Editor/prweb19217168.htm</a><br>─</p><p>Zed Industries, the maker of a high-performance, multiplayer code editor, today announced it raised a $10 million Series A funding round, bringing total investment in the company to $12.5 million. The round was led by Redpoint Ventures, with participation from existing investor Root Ventures as well angel investors including Dylan Field of Figma, Tom Preston Werner of GitHub, Spencer Kimball of CockroachDB, and Rahul Vohra and Todd Goldberg of Superhuman.</p><p>高性能でマルチプレイヤーのコードエディタを作成するZed Industriesは、本日、1000万ドルのシリーズA資金調達ラウンドを発表し、同社の総投資額を1250万ドルに引き上げました。このラウンドはRedpoint Venturesが主導し、既存投資家のRoot Venturesと、エンジェル投資家であるFigmaのDylan Field、GitHubのTom Preston Werner、CockroachDBのSpencer Kimball、SuperhumanのRahul VohraとTodd Goldbergが参加しました。</p></blockquote><p>とある通り、 GitHub の共同創業者 Tom Preston Werner 氏もエンジェル投資家として参加しているようです。
また Zed は GitHub.com の仕組みをベースとしており、ここまで関わりが深いエディタが採用している方式なので、
現状は <code>@github/copilot-language-server</code> を使った連携方法しか選択肢が無いのかもしれませんね。</p></div></article></main><footer class="w-full p-md border-t border-border bg-surface"><div class="max-w-max mx-auto flex justify-between items-center text-sm text-tertiary"><p>&copy; 2026 xshoji's blog. Crafted in Tokyo. All rights reserved.</p><nav class="social-links flex gap-md"><a href=https://github.com/xshoji target=_blank rel=noopener class="text-tertiary font-medium transition-fast hover:text-accent border-none">GitHub</a>
<a href=https://x.com/xshoji2020 target=_blank rel=noopener class="text-tertiary font-medium transition-fast hover:text-accent border-none">X</a>
<a href=/index.xml class="text-tertiary font-medium transition-fast hover:text-accent border-none">RSS</a></nav></div></footer></body></html>