<!doctype html><html lang=ja dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Posts | xshoji's blog</title><link rel=icon type=image/x-icon href=/favicon.ico><link rel=stylesheet href=/css/main.b717dfc70331b3ebc28360bca3801b6df9b57b9772693a97d4de93d8243c33c4.css integrity="sha256-txffxwMxs+vCg2C8o4Abbfm1e5dyaTqX1N6T2CQ8M8Q=" crossorigin=anonymous><script src=/js/main.21c79724b722ac6d4c899d67499c00b5a8177147de6f4eaf0312e081db22859f.js integrity="sha256-IceXJLcirG1MiZ1nSZwAtagXcUfeb06vAxLggdsihZ8=" crossorigin=anonymous defer></script><script src=/js/lightbox.550e4d90ea59c55fb90b08fc2da070e791ab087d60cc52a932b5a5e5a2037547.js integrity="sha256-VQ5NkOpZxV+5Cwj8LaBw55GrCH1gzFKpMrWl5aIDdUc=" crossorigin=anonymous defer></script></head><body><header class="w-full px-4 py-3 md:p-6 border-b border-border bg-surface sticky top-0 z-50 backdrop-blur bg-surface-alpha transition-all duration-150 will-change-transform"><div id=translate-banner class="translate-banner max-w-max mx-auto py-2 px-6 text-sm text-text-tertiary text-center" hidden><a id=translate-link href=# target=_blank rel=noopener class="font-medium transition duration-150 hover:text-accent border-none text-text-tertiary">ğŸŒ <span id=translate-text></span></a></div><div class="max-w-layout mx-auto flex justify-between items-center transition"><h1 class="blog-name text-sm md:text-lg font-sans font-semibold tracking-tight m-0 transition transform-origin-left whitespace-nowrap"><a href=/ class="text-text-primary border-b border-transparent hover:text-accent transition">xshoji's blog</a></h1><nav class="blog-menu m-0 transition duration-150"><ul class="list-none flex gap-6 md:gap-10 items-center"><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-text-secondary border-none py-2 pb-2 relative" href=/posts/>Blog</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-text-secondary border-none py-2 pb-2 relative" href=/about/>About</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-text-secondary border-none py-2 pb-2 relative" href=/tags/>Tags</a></li><li class="mb-0 leading-relaxed"><a class="nav-link text-sm font-medium tracking-sm uppercase text-text-secondary border-none py-2 pb-2 relative" href=/search/>Search</a></li></ul></nav></div></header><main><article class="max-w-content mx-auto"><header class=mb-12><div class="post-meta flex flex-wrap gap-2 items-center text-xs text-text-tertiary uppercase tracking-wider font-semibold mb-6"><time class=text-accent datetime=2026-01-12T02:33:24+09:00>2026-01-12
</time><span class="w-5 h-px bg-border"></span>
<span class="ml-auto text-right whitespace-nowrap">9 min read</span></div><h1 class="post-title text-2xl font-sans font-semibold leading-snug mt-2 mb-2"><a href=https://blog.xshoji.com/posts/20260112_golang-flag-pretty-usage-with-long/ class="text-text-primary border-b border-transparent hover:text-accent">Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é›†ãã®2: ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¸å¯¾å¿œã™ã‚‹</a></h1><div class="flex gap-2 flex-wrap"><a href=/tags/golang/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#golang</a>
<a href=/tags/go/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#go</a>
<a href=/tags/flag/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#flag</a>
<a href=/tags/cli/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#cli</a>
<a href=/tags/command-line/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#command-line</a>
<a href=/tags/usage/ class="text-xs px-[0.8rem] py-[0.3rem] bg-accent-light text-accent rounded font-medium tracking-sm border-transparent transition duration-150 hover:bg-accent hover:text-surface hover:border-accent hover:-translate-y-1">#usage</a></div></header><details id=TableOfContents aria-label=ç›®æ¬¡><summary><h3 class="text-sm font-semibold mt-0 mb-4 opacity-75">ç›®æ¬¡</h3></summary><nav id=TableOfContents><ul><li><a href=#ãã‚‚ãã‚‚ã®å•é¡Œç‚¹>ãã‚‚ãã‚‚ã®å•é¡Œç‚¹</a></li><li><a href=#ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åˆ©ç‚¹>ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åˆ©ç‚¹</a></li><li><a href=#ä»Šå›ä½œã£ãŸã‚‚ã®>ä»Šå›ä½œã£ãŸã‚‚ã®</a></li><li><a href=#ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ç´¹ä»‹>ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ç´¹ä»‹</a></li><li><a href=#å®Ÿè£…ã®è§£èª¬>å®Ÿè£…ã®è§£èª¬</a><ul><li><a href=#defineflagvalue>defineFlagValue</a></li><li><a href=#customusage>customUsage</a></li><li><a href=#getoptionsusage>getOptionsUsage</a></li></ul></li><li><a href=#ã¾ã¨ã‚>ã¾ã¨ã‚</a></li></ul></nav></details><div class="article-content text-base leading-[1.7] text-text-secondary"><p><a href=https://blog.xshoji.com/posts/20260103_golang-flag-pretty-usage/ class="text-accent no-underline border-b border-accent hover:text-text-primary hover:border-transparent relative transition-[border-color,color]">Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯é›†ãã®1: Usageã‚’ç¶ºéº—ã«æ•´å½¢ã—ã¦è¦‹ã‚„ã™ãã™ã‚‹ | xshoji&rsquo;s blog</a></p><p>ã®ç¶šãã§ã™ã€‚å‰å›ã¯ã€Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ Usage ã‚’ç¶ºéº—ã«æ•´å½¢ã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
Usage ã¯è¦‹ã‚„ã™ããªã£ãŸã®ã§ã™ãŒã€æ¬¡ã®è¦ä»¶ã¨ã—ã¦ã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ‰±ã„ãŸã„ã€ã¨ã„ã†ã®ãŒã‚ã‚Šã¾ã™ã€‚</p><p>Unixç³»ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã¯ã€ä¸€èˆ¬çš„ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ <code>-f</code> ã®ã‚ˆã†ãª1æ–‡å­—ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã¨ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ <code>--file</code> ã®ã‚ˆã†ãªè¤‡æ•°æ–‡å­—ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚
Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ ä»»æ„ã®æ–‡å­—åˆ—ã‚’ãƒ•ãƒ©ã‚°åã¨ã—ã¦å®šç¾©ã§ãã‚‹ã®ã§ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸¡æ–¹ã‚’å®Ÿè£…ä¸Šå®šç¾©ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ãŒã€ãã‚Œã‚‰ãŒåŒã˜æ„å‘³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ãŒ Usage ã‹ã‚‰ã¯ä¼ã‚ã‚Šã¥ã‚‰ã„ã®ã§ã€ãã®ã¾ã¾ã§ã¯ã¨ã¦ã‚‚ä½¿ãˆã¾ã›ã‚“ã€‚</p><p>å‰å›ç´¹ä»‹ã—ãŸæœ‰åãª <a href=https://github.com/spf13/cobra class="text-accent no-underline border-b border-accent hover:text-text-primary hover:border-transparent relative transition-[border-color,color]">spf13/cobra</a>
ã‚„ <a href=https://github.com/urfave/cli class="text-accent no-underline border-b border-accent hover:text-text-primary hover:border-transparent relative transition-[border-color,color]">urfave/cli</a>
ã¨ã„ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ãˆã°ç°¡å˜ã«å®Ÿç¾ã§ãã‚‹ã®ã§ã™ãŒã€
ä»Šå›ã¯ã‚ãˆã¦ main.go ã®ã¿ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã“ã ã‚ã‚ŠãŸã‹ã£ãŸãŸã‚ã€Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘ã§ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã‚’è©¦è¡ŒéŒ¯èª¤ã—ã¦ã¿ã¾ã—ãŸã€‚</p><p>å¤šå°‘è¤‡é›‘ã§ã™ãŒã€å®Ÿç”¨çš„ãªå®Ÿè£…ãŒã§ããŸã®ã§ã€ä»Šå›ã¯ãã®å®Ÿè£…æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p><blockquote class="my-[var(--space-md)] pl-[var(--space-md)] border-l-[3px] border-accent italic font-sans text-base whitespace-normal [overflow-wrap:anywhere] [word-wrap:break-word] [&_p]:text-text-tertiary [&_a]:text-text-secondary"><p>æ³¨æ„: ã“ã®è¨˜äº‹ã§ç´¹ä»‹ã™ã‚‹ã‚¹ãƒ‹ãƒšãƒƒãƒˆã¯ Go 1.18ä»¥ä¸Šï¼ˆGenericsã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ï¼‰ ãŒå¿…è¦ã§ã™</p></blockquote><h2 id=ãã‚‚ãã‚‚ã®å•é¡Œç‚¹ style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">ãã‚‚ãã‚‚ã®å•é¡Œç‚¹</h2><p>é€šå¸¸ã€Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’å®šç¾©ã™ã‚‹å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>filePath</span> = <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;f&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;Path to the file&#34;</span>)</span></span></code></pre></div><p>ã“ã®å ´åˆã€ <code>-f</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã‚Œã ã‘ã§ã¯ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆ <code>--file</code> ï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
ã“ã‚Œã«å¯¾ã—ã¦ã€ flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¤‡æ•°ã®åå‰ã§åŒã˜å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>filePath</span> = <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;f&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;Path to the file&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>StringVar</span>(<span style=color:#a6e22e>filePath</span>, <span style=color:#e6db74>&#34;file&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;Path to the file&#34;</span>)</span></span></code></pre></div><p>ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€ <code>-f</code> ã¨ <code>--file</code> ã®ä¸¡æ–¹ã§åŒã˜å¤‰æ•°ã«å€¤ã‚’è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
ã—ã‹ã—ã€ã“ã‚Œã ã‘ã§ã¯ Usage å‡ºåŠ›æ™‚ã«ä¸¡æ–¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåˆ¥ã€…ã«è¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã„ã€åŒã˜æ„å‘³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ãŒä¼ã‚ã‚Šã¥ã‚‰ã„ã§ã™ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-plaintext bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=plaintext><span style=display:flex><span>Usage of ./myapp:
</span></span><span style=display:flex><span>  -f string
</span></span><span style=display:flex><span>        Path to the file
</span></span><span style=display:flex><span>  -file string
</span></span><span style=display:flex><span>        Path to the file</span></span></code></pre></div><p>ã¾ãã€ã“ã‚Œã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ1ã¤ãªã®ã§ã¾ã è‰¯ã„ã‚“ã§ã™ãŒã€è¤‡æ•°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ãªã‚‹ã¨ã‹ãªã‚Šè¦‹ã¥ã‚‰ããªã‚Šã¾ã™ã€‚
å‰å›ç´¹ä»‹ã—ãŸã€ Custom Usage ã§ã®è¡¨ç¤ºã‚’è¸è¥²ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã§ãã‚‹ã¨ç†æƒ³çš„ã ã¨æ€ã„ã¾ã™ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-plaintext bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=plaintext><span style=display:flex><span>Usage: myapp [options]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Options:
</span></span><span style=display:flex><span>  -f, --file string        Path to the file</span></span></code></pre></div><h2 id=ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åˆ©ç‚¹ style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®åˆ©ç‚¹</h2><p>æ¬¡ã«ã€ãã‚‚ãã‚‚ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ã£ã¦ã‚ã‚‹ã®ï¼Ÿ ã¨ã„ã†ç‚¹ã«ã¤ã„ã¦ç§ã®è€ƒãˆã‚’ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚
ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã¨ã€ã‚·ãƒ³ãƒ—ãƒ«ã«ã€Œã‚ªãƒ—ã‚·ãƒ§ãƒ³åãŒç›´æ„Ÿçš„ã«åˆ†ã‹ã‚Šã‚„ã™ã„ã€ã¨ã„ã†åˆ©ç‚¹ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚</p><p>ä¾‹: <code>-f</code> ã‚ˆã‚Šã‚‚ <code>--file-path</code> ã®æ–¹ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ãŒç›´æ„Ÿçš„</p><p>ã“ã®çµæœã€æ¥­å‹™ã§ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†éš›ã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚</p><ul><li>å®Ÿè¡Œçµæœã®è¨¼è·¡ã‚’ã‚ã¨ã‹ã‚‰è¦‹ãŸã¨ãã«ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ãŒåˆ†ã‹ã‚Šã‚„ã™ã„</li><li>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å€¤ã‚’å¤‰ãˆã¦å®Ÿè¡Œã™ã‚‹éš›ã« help ã‚’è¦‹ãªãã¦ã‚‚æ„å‘³ã‚’æ¨æ¸¬ã—ã‚„ã™ããªã‚‹</li><li>(æœ€è¿‘ã ã¨) AIã«å®Ÿè¡Œã•ã›ã‚‹å ´åˆã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ãŒä¼ã‚ã‚Šã‚„ã™ã„&mldr;ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“</li></ul><p>ã¨ã„ã†ã“ã¨ã§ã€ã‚‚ã—æ‰‹é–“ã§ãªã‘ã‚Œã°ãªã‚‹ã¹ããƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠãã¨è‰¯ã„ã®ã‹ãªã€ã¨æ€ã£ã¦ã„ã¾ã™ã€‚</p><h2 id=ä»Šå›ä½œã£ãŸã‚‚ã® style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">ä»Šå›ä½œã£ãŸã‚‚ã®</h2><p>å‰å›ã®è¨˜äº‹ã§ç´¹ä»‹ã—ãŸ Custom Usage ã‚’åŸºã«ã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ãŸã‚ˆã‚Šãƒªãƒƒãƒãªã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’è€ƒãˆã¾ã—ãŸã€‚
ä»Šå›ç´¹ä»‹ã™ã‚‹ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ä½¿ã†ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã« main.go ã®ã¿ã§ã‚‚è‰¯ã„æ„Ÿã˜ã«ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-plaintext bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=plaintext><span style=display:flex><span>[01-12 02:53:17] macbookpro sample$ ls -al
</span></span><span style=display:flex><span>total 8
</span></span><span style=display:flex><span>drwxr-xr-x   3 user  wheel    96 Jan 12 02:53 .
</span></span><span style=display:flex><span>drwxrwxrwt  15 root  wheel   480 Jan 12 02:53 ..
</span></span><span style=display:flex><span>-rw-r--r--   1 user  wheel  3872 Jan 12 02:50 main.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[01-12 02:53:18] macbookpro sample$ go run main.go -h
</span></span><span style=display:flex><span>Usage: main --file-path &lt;string&gt; [OPTIONS]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Description:
</span></span><span style=display:flex><span>  A sample command demonstrating full template usage in Go CLI applications.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Options:
</span></span><span style=display:flex><span>  -f, --file-path &lt;string&gt;          (required) File path
</span></span><span style=display:flex><span>  -d, --debug                       Debug mode
</span></span><span style=display:flex><span>  -l, --line-index &lt;int&gt;            Index of line (default 10)
</span></span><span style=display:flex><span>  -u, --url &lt;string&gt;                URL (default https://httpbin.org/get)
</span></span><span style=display:flex><span>  -w, --wait-seconds &lt;duration&gt;     Duration of wait seconds (e.g., 500ms, 3s, 2m) (default 1s)</span></span></code></pre></div><p>ä¾å­˜ãªã—ã® main.go ã®ã¿ã§å®Ÿè£…ã—ã¦ã‚‹å‰²ã«ã¯ã€ã‹ãªã‚Šæœ¬æ ¼çš„ãªCLIã£ã½ã„Usageè¡¨ç¤ºãŒã§ãã¦ã„ã‚‹ã®ã§ã¯ã€ã¨æ€ã„ã¾ã™ã€‚
å‰å›ç´¹ä»‹ã—ãŸ Custom Usage ã§å·¥å¤«ã—ãŸä»¥ä¸‹ã®ç‚¹</p><ul><li>æ­£ç¢ºãªå®Ÿè¡Œãƒã‚¤ãƒŠãƒªåã‚’è¡¨ç¤ºã™ã‚‹</li><li>ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜æ–‡ã®è¡¨ç¤º</li><li>ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸€è¦§ãŒä¸€è¡Œã§è¡¨ç¤ºã•ã‚Œã‚‹</li><li>å¿…é ˆã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã©ã‚Œã‹åˆ†ã‹ã‚Šã‚„ã™ã„ï¼ˆä¸Šä½ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰</li></ul><p>ã¯å½“ç„¶è¸è¥²ã—ã¦ã„ã¦ã€ãã‚Œã«åŠ ãˆã¦ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚ã‚µãƒãƒ¼ãƒˆã§ãã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ç´°ã‹ã„ç‚¹ã§ã™ãŒã€1è¡Œç›®ã® Usage è¡¨ç¤ºã§ã€å¿…é ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æŒ‡å®šãŒä¾‹ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãª Usage ã‚’è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãã®ä»–ã®å·¥å¤«ã¨ã—ã¦ã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåŠ ã‚ã‚‹ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ—ã®æ¨ªå¹…ãŒå‹•çš„ã«å¤‰ã‚ã‚‹ãŸã‚ã€
Usage å‡ºåŠ›æ™‚ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³åã®æ¨ªå¹…ã‚’è‡ªå‹•èª¿æ•´ã™ã‚‹ã‚ˆã†ãªå®Ÿè£…ã‚‚å…¥ã‚Œã¦ã„ã¦ã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³åãŒé•·ããªã£ã¦ã‚‚ç¶ºéº—ã«æ•´åˆ—ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><h2 id=ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ç´¹ä»‹ style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">ã‚¹ãƒ‹ãƒšãƒƒãƒˆã®ç´¹ä»‹</h2><p>ã§ã¯ã€ä»Šå›ä½œæˆã—ãŸã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
ä½¿ã†éš›ã¯ã€ã“ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã‚’ã‚³ãƒ”ãƒšã—ã¦</p><ul><li><code>commandDescription</code> ã‚’è‡ªåˆ†ã®ãƒ„ãƒ¼ãƒ«ã®èª¬æ˜ã«ç½®ãæ›ãˆã‚‹</li><li><code>optionXxxx</code> ç­‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å®šç¾©éƒ¨åˆ†ã‚’è‡ªåˆ†ã®ãƒ„ãƒ¼ãƒ«ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ç½®ãæ›ãˆã‚‹</li><li><code>func main()</code> ã«ãƒ¡ã‚¤ãƒ³ã®å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹</li></ul><p>ã‚’ä¿®æ­£ã—ã¦ã‚‚ã‚‰ãˆã‚Œã°OKã§ã™ã€‚
<code>flag Utils</code> ã‚ˆã‚Šä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€Usage ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸã„å ´åˆä»¥å¤–ã¯ãã®ã¾ã¾ã‚³ãƒ”ãƒšã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span> <span style=color:#e6db74>&#34;embed&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;flag&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;os&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;path/filepath&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;sort&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;strconv&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;strings&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> (
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Req</span>        = <span style=color:#e6db74>&#34;(required)&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>UsageDummy</span> = <span style=color:#e6db74>&#34;########&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> (
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>commandDescription</span> = <span style=color:#e6db74>&#34;A sample command demonstrating full template usage in Go CLI applications.&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Command options (the -h and --help flags are provided by default in the flag package)</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionFilePath</span>        = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;f&#34;</span>, <span style=color:#e6db74>&#34;file-path&#34;</span> <span style=color:#75715e>/*    */</span>, <span style=color:#a6e22e>Req</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34; File path&#34;</span> <span style=color:#75715e>/*                                 */</span>, <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#75715e>/*                         */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>StringVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionUrl</span>             = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;u&#34;</span>, <span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#75715e>/*          */</span>, <span style=color:#e6db74>&#34;URL&#34;</span> <span style=color:#75715e>/*                                            */</span>, <span style=color:#e6db74>&#34;https://httpbin.org/get&#34;</span> <span style=color:#75715e>/*  */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>StringVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionLineIndex</span>       = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;l&#34;</span>, <span style=color:#e6db74>&#34;line-index&#34;</span> <span style=color:#75715e>/*   */</span>, <span style=color:#e6db74>&#34;Index of line&#34;</span> <span style=color:#75715e>/*                                  */</span>, <span style=color:#ae81ff>10</span> <span style=color:#75715e>/*                         */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Int</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>IntVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionDurationWaitSec</span> = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;w&#34;</span>, <span style=color:#e6db74>&#34;wait-seconds&#34;</span> <span style=color:#75715e>/* */</span>, <span style=color:#e6db74>&#34;Duration of wait seconds (e.g., 500ms, 3s, 2m)&#34;</span> <span style=color:#75715e>/* */</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>*</span><span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span> <span style=color:#75715e>/*              */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Duration</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>DurationVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionDebug</span>           = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;d&#34;</span>, <span style=color:#e6db74>&#34;debug&#34;</span> <span style=color:#75715e>/*        */</span>, <span style=color:#e6db74>&#34;Debug mode&#34;</span> <span style=color:#75715e>/*                                     */</span>, <span style=color:#66d9ef>false</span> <span style=color:#75715e>/*                      */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Bool</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>BoolVar</span>)
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Usage</span> = <span style=color:#a6e22e>customUsage</span>(<span style=color:#a6e22e>commandDescription</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Parse</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>optionFilePath</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;\n[ERROR] Missing required option\n\n&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Usage</span>()
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Exit</span>(<span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionsUsage</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getOptionsUsage</span>(<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;[ Command options ]\n%s\n&#34;</span>, <span style=color:#a6e22e>optionsUsage</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// =======================================</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// flag Utils</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// =======================================</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Helper function for flag</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>defineFlagValue</span>[<span style=color:#a6e22e>T</span> <span style=color:#a6e22e>comparable</span>](<span style=color:#a6e22e>short</span>, <span style=color:#a6e22e>long</span>, <span style=color:#a6e22e>description</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>defaultValue</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>flagFunc</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>usage</span> <span style=color:#66d9ef>string</span>) <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>flagVarFunc</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>usage</span> <span style=color:#66d9ef>string</span>)) <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flagUsage</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>short</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>UsageDummy</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>description</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>zero</span> <span style=color:#a6e22e>T</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>defaultValue</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>zero</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>flagUsage</span> = <span style=color:#a6e22e>flagUsage</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34; (default %v)&#34;</span>, <span style=color:#a6e22e>defaultValue</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>f</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flagFunc</span>(<span style=color:#a6e22e>long</span>, <span style=color:#a6e22e>defaultValue</span>, <span style=color:#a6e22e>flagUsage</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flagVarFunc</span>(<span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>short</span>, <span style=color:#a6e22e>defaultValue</span>, <span style=color:#a6e22e>UsageDummy</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>f</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Custom usage message</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>customUsage</span>(<span style=color:#a6e22e>description</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>optionsUsage</span>, <span style=color:#a6e22e>requiredOptionExample</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getOptionsUsage</span>(<span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Usage: %s %s[OPTIONS]\n\n&#34;</span>, <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>string</span> { <span style=color:#a6e22e>e</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Executable</span>(); <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Base</span>(<span style=color:#a6e22e>e</span>) }(), <span style=color:#a6e22e>requiredOptionExample</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Description:\n  %s\n\n&#34;</span>, <span style=color:#a6e22e>description</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Options:\n%s&#34;</span>, <span style=color:#a6e22e>optionsUsage</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get options usage message</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>getOptionsUsage</span>(<span style=color:#a6e22e>currentValue</span> <span style=color:#66d9ef>bool</span>) (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>requiredOptionExample</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionNameWidth</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>usages</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>string</span>, <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>getType</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>v</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>NewReplacer</span>(<span style=color:#e6db74>&#34;*flag.boolValue&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#e6db74>&#34;*flag.&#34;</span>, <span style=color:#e6db74>&#34;&lt;&#34;</span>, <span style=color:#e6db74>&#34;Value&#34;</span>, <span style=color:#e6db74>&#34;&gt;&#34;</span>).<span style=color:#a6e22e>Replace</span>(<span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>VisitAll</span>(<span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>f</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Flag</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>optionNameWidth</span> = max(<span style=color:#a6e22e>optionNameWidth</span>, len(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%s %s&#34;</span>, <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#a6e22e>getType</span>(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%T&#34;</span>, <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Value</span>))))<span style=color:#f92672>+</span><span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>VisitAll</span>(<span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>f</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Flag</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Usage</span> <span style=color:#f92672>==</span> <span style=color:#a6e22e>UsageDummy</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getType</span>(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%T&#34;</span>, <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Value</span>))
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>currentValue</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>value</span> = <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Value</span>.<span style=color:#a6e22e>String</span>()
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>short</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Usage</span>, <span style=color:#a6e22e>UsageDummy</span>)[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>mainUsage</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Usage</span>, <span style=color:#a6e22e>UsageDummy</span>)[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Contains</span>(<span style=color:#a6e22e>mainUsage</span>, <span style=color:#a6e22e>Req</span>) {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>requiredOptionExample</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;--%s %s &#34;</span>, <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Name</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>usages</span> = append(<span style=color:#a6e22e>usages</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;  -%-1s, --%-&#34;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Itoa</span>(<span style=color:#a6e22e>optionNameWidth</span>)<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;s %s\n&#34;</span>, <span style=color:#a6e22e>short</span>, <span style=color:#a6e22e>f</span>.<span style=color:#a6e22e>Name</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34; &#34;</span><span style=color:#f92672>+</span><span style=color:#a6e22e>value</span>, <span style=color:#a6e22e>mainUsage</span>))
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>sort</span>.<span style=color:#a6e22e>SliceStable</span>(<span style=color:#a6e22e>usages</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Count</span>(<span style=color:#a6e22e>usages</span>[<span style=color:#a6e22e>i</span>], <span style=color:#a6e22e>Req</span>) &gt; <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Count</span>(<span style=color:#a6e22e>usages</span>[<span style=color:#a6e22e>j</span>], <span style=color:#a6e22e>Req</span>)
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Join</span>(<span style=color:#a6e22e>usages</span>, <span style=color:#e6db74>&#34;&#34;</span>), <span style=color:#a6e22e>requiredOptionExample</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><h2 id=å®Ÿè£…ã®è§£èª¬ style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">å®Ÿè£…ã®è§£èª¬</h2><p>ä½¿ã†ã¨ãã¯æ„è­˜ã—ãªãã¦è‰¯ã„ã®ã§ã™ãŒã€å¤šå°‘è¤‡é›‘ãªã®ã§ä½•ã‚’ã‚„ã£ã¦ã‚‹ã®ã‹ã‚’ç°¡å˜ã«è§£èª¬ã—ã¾ã™ã€‚</p><h3 id=defineflagvalue style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.125rem]">defineFlagValue</h3><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> (
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionFilePath</span>   = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;f&#34;</span>, <span style=color:#e6db74>&#34;file-path&#34;</span> <span style=color:#75715e>/*  */</span>, <span style=color:#a6e22e>Req</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34; File path&#34;</span> <span style=color:#75715e>/* */</span>, <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#75715e>/*     */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>StringVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionLineIndex</span>  = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;l&#34;</span>, <span style=color:#e6db74>&#34;line-index&#34;</span> <span style=color:#75715e>/* */</span>, <span style=color:#e6db74>&#34;Index of line&#34;</span> <span style=color:#75715e>/*  */</span>, <span style=color:#ae81ff>10</span> <span style=color:#75715e>/*     */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Int</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>IntVar</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>optionDebug</span>      = <span style=color:#a6e22e>defineFlagValue</span>(<span style=color:#e6db74>&#34;d&#34;</span>, <span style=color:#e6db74>&#34;debug&#34;</span> <span style=color:#75715e>/*      */</span>, <span style=color:#e6db74>&#34;Debug mode&#34;</span> <span style=color:#75715e>/*     */</span>, <span style=color:#66d9ef>false</span> <span style=color:#75715e>/*  */</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Bool</span>, <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>BoolVar</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>defineFlagValue</span>[<span style=color:#a6e22e>T</span> <span style=color:#a6e22e>comparable</span>](<span style=color:#a6e22e>short</span>, <span style=color:#a6e22e>long</span>, <span style=color:#a6e22e>description</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>defaultValue</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>flagFunc</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>usage</span> <span style=color:#66d9ef>string</span>) <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>flagVarFunc</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>p</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>value</span> <span style=color:#a6e22e>T</span>, <span style=color:#a6e22e>usage</span> <span style=color:#66d9ef>string</span>)) <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flagUsage</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>short</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>UsageDummy</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>description</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>zero</span> <span style=color:#a6e22e>T</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>defaultValue</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>zero</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>flagUsage</span> = <span style=color:#a6e22e>flagUsage</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34; (default %v)&#34;</span>, <span style=color:#a6e22e>defaultValue</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>f</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>flagFunc</span>(<span style=color:#a6e22e>long</span>, <span style=color:#a6e22e>defaultValue</span>, <span style=color:#a6e22e>flagUsage</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flagVarFunc</span>(<span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>short</span>, <span style=color:#a6e22e>defaultValue</span>, <span style=color:#a6e22e>UsageDummy</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>f</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>ã„ããªã‚Šç‹¬è‡ªå®Ÿè£…ãŒå‡ºã¦ãã¾ã—ãŸã€‚
ã“ã‚Œã¯ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¨ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸¡æ–¹ã‚’åŒã˜æ„å‘³ã§å®šç¾©ã™ã‚‹ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã§ã™ã€‚
ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³åã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³åã€èª¬æ˜æ–‡ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ä¸¡æ–¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åŒã˜å¤‰æ•°ã«ãƒã‚¤ãƒ³ãƒ‰ã—ã¾ã™ã€‚
<code>flag.String</code> ã‚„ <code>flag.Int</code> ã®ã‚ˆã†ãªé–¢æ•°ã¨åŒã˜ã‚‚ã®ã§ã™ã­ã€‚</p><p>ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®2ç‚¹ã§ã™ã€‚</p><ul><li><code>short + UsageDummy + description</code><ul><li>Usage ã®å…ˆé ­ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³åã‚’åŸ‹ã‚è¾¼ã‚“ã§ã„ã¾ã™ã€‚</li><li>å¾Œã®å‡¦ç†ã§ã€ Usage ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³åã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚</li></ul></li><li><code>if defaultValue != zero {...}</code><ul><li>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€ Usage ã®èª¬æ˜æ–‡ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’å«ã‚ã¦ã„ã¾ã™ã€‚</li><li>å¾Œã®å‡¦ç†ã§ Usage ã‚’è¡¨ç¤ºæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã§ã™ã€‚</li></ul></li></ul><p>ã¡ãªã¿ã«ã“ã®é–¢æ•°ã¯ã€Go 1.18 ã§å°å…¥ã•ã‚ŒãŸ Generics ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
ã‚‚ã— Generics ãªã‹ã£ãŸã‚‰åŒã˜å®Ÿè£…ã‚’å¤§é‡ã«ã‚³ãƒ”ãƒšã—ãªã„ã¨ã„ã‘ãªã‹ã£ãŸã®ã§ã€ã‚ã¡ã‚ƒãã¡ã‚ƒåŠ©ã‹ã‚Šã¾ã—ãŸ!!</p><p>ã‚ã€ã‚ã¨ <code>/* */,</code> ã®ã‚ˆã†ãªã‚³ãƒ¡ãƒ³ãƒˆãƒ–ãƒ­ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ã‚‹ç†ç”±ã¯ã€
defineFlagValue ã®å¼•æ•°ã®ä½ç½®ãŒç¸¦ã«æƒã†ã¨ãƒ‘ãƒƒã¨ã¿ãŸæ™‚ã«å„ç¨®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å€¤ãŒåˆ†ã‹ã‚Šã‚„ã™ããªã‚‹ã®ã§å¯èª­æ€§ã®ãŸã‚ã«å…¥ã‚Œã¦ã¾ã™ã€‚</p><h3 id=customusage style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.125rem]">customUsage</h3><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#75715e>// Custom usage message</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>customUsage</span>(<span style=color:#a6e22e>description</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>optionsUsage</span>, <span style=color:#a6e22e>requiredOptionExample</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getOptionsUsage</span>(<span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Usage: %s %s[OPTIONS]\n\n&#34;</span>, <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>string</span> { <span style=color:#a6e22e>e</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Executable</span>(); <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>filepath</span>.<span style=color:#a6e22e>Base</span>(<span style=color:#a6e22e>e</span>) }(), <span style=color:#a6e22e>requiredOptionExample</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Description:\n  %s\n\n&#34;</span>, <span style=color:#a6e22e>description</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Fprintf</span>(<span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>CommandLine</span>.<span style=color:#a6e22e>Output</span>(), <span style=color:#e6db74>&#34;Options:\n%s&#34;</span>, <span style=color:#a6e22e>optionsUsage</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>ã“ã“ã¯å‰å›ç´¹ä»‹ã—ãŸ Custom Usage ã®å®Ÿè£…ã¨ã»ã¼åŒã˜ã§ã™ã€‚
Usage ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚
ãŒã€å‰å›ã¨é•ã†ã®ã¯ <code>getOptionsUsage</code> é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸€è¦§ã®è¡¨ç¤ºã¨ã€å¿…é ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¾‹ç¤ºéƒ¨åˆ†ï¼ˆä¸€è¡Œç›®ã®ã‚„ã¤ï¼‰ã‚’å–å¾—ã—ã¦ã„ã‚‹ç‚¹ã§ã™ã€‚</p><h3 id=getoptionsusage style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.125rem]">getOptionsUsage</h3><p>ã“ã“ãŒä»Šå›ã®ã‚­ãƒ¢ã®éƒ¨åˆ†ã§ã™ã€‚
ã“ã®é–¢æ•°ã¯ã€ <code>flag.VisitAll</code> ã§ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’èµ°æŸ»ã—ã€ Custom Usage ã® &ldquo;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¸€è¡Œè¡¨ç¤º&rdquo; ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«åˆã‚ã›ãŸ Usage ã‚’ç”Ÿæˆã—ã¾ã™ã€‚
ã“ã®æ™‚ã€å¿…é ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¤œå‡ºã—ã¦ã€ Usage ã®1è¡Œç›®ã«ä¾‹ç¤ºã™ã‚‹ãŸã‚ã®æ–‡å­—åˆ—ã‚‚åŒæ™‚ã«ç”Ÿæˆã—ã€é–¢æ•°ã®æˆ»ã‚Šå€¤ã¨ã—ã¦è¿”ã—ã¾ã™ã€‚</p><p>å‰å›ã®æ–¹æ³•ã¯ã€ flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æ¨™æº–ã® Usage å‡ºåŠ›ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦æ•´å½¢ã—ã¦ã„ãŸã®ã§ã™ãŒã€ä»Šå›ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³åã®æ¨ªå¹…ã‚’å‹•çš„ã«èª¿æ•´ã—ãŸã‚Šã€ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³åã‚’è¿½åŠ ã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€æ¨™æº–ã® Usage å‡ºåŠ›ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹æ–¹æ³•ã¯ä½¿ãˆã¾ã›ã‚“ã€‚
ã“ã®ãŸã‚ã€ <code>flag.VisitAll</code> ã§ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’1ã¤ãšã¤èµ°æŸ»ã—ã¦ã€ Usage ã‚’çµ„ã¿ç«‹ã¦ã‚‹æ–¹æ³•ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
å‰å›ã®è¨˜äº‹ã‚’èª­ã‚“ã æ–¹ãŒã‚‚ã—ã„ã‚‰ã£ã—ã‚ƒã£ãŸã‚‰ã€ã€Œãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤å–å¾—ã§ããªã„ã‚“ã˜ã‚ƒãªã‹ã£ãŸã®ï¼Ÿã€ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ãã“ã¯ãã®é€šã‚Šã§ã€flag ãŒå‡ºåŠ›ã™ã‚‹ default å€¤ã¯ VisitAll ã§ã¯å–å¾—ã§ãã¾ã›ã‚“ã€‚</p><p>ä»Šå›ã©ã†ã‚„ã£ã¦ã„ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€ <code>defineFlagValue</code> ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’ä½¿ã£ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¦ã„ã‚‹å‡¦ç†ã®ä¸­ã§</p><div class="highlight my-[var(--space-md)]"><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4 class="p-[var(--space-sm)] pt-[calc(var(--space-sm)*1.1)] md:p-[var(--space-md)] rounded-[4px] overflow-x-auto text-[0.75rem] md:text-[var(--text-sm)] leading-[1.6]"><code class="language-go bg-transparent p-0 text-inherit whitespace-pre inline-block [-webkit-text-size-adjust:none]" data-lang=go><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>defaultValue</span> <span style=color:#f92672>!=</span> <span style=color:#a6e22e>zero</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>flagUsage</span> = <span style=color:#a6e22e>flagUsage</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34; (default %v)&#34;</span>, <span style=color:#a6e22e>defaultValue</span>)
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>ã¨ã„ã†ã‚ˆã†ãªã“ã¨ã‚’ã‚„ã£ã¦ã¾ã™ï¼ˆã€ŒdefineFlagValueã€ã§ã‚‚èª¬æ˜ã—ãŸå†…å®¹ã§ã™ï¼‰ã€‚
ã“ã‚Œã¯ã¤ã¾ã‚Šã€æŒ‡å®šã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒãã®å‹ã®åˆæœŸå€¤ã‹ã©ã†ã‹ãƒã‚§ãƒƒã‚¯ã—ã€
ã‚‚ã—åˆæœŸå€¤ã¨ç•°ãªã‚‹å€¤ã ã£ãŸå ´åˆã¯ &ldquo;ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®èª¬æ˜æ–‡ã«æ–‡å­—åˆ—ã¨ã—ã¦å«ã‚ã¦ã—ã¾ã†&rdquo; ã¨ã„ã†ã‚ˆã†ãªæ–¹æ³•ã§å¯¾å‡¦ã—ã¦ã¾ã™ã€‚
ã“ã†ã™ã‚‹ã“ã¨ã§ã€ VisitAll ã§å–å¾—ã•ã‚ŒãŸ Usage æ–‡å­—åˆ—ã‚’ãã®ã¾ã¾è¡¨ç¤ºã™ã‚‹ã ã‘ã§ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚‚è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p><p>ã¾ãŸã€ <code>f.Usage</code> ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³åã¨ ãƒ¡ã‚¤ãƒ³ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³èª¬æ˜æ–‡ã‚’åˆ†é›¢ã—ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«åˆã‚ã›ã¦çµ„ã¿ç«‹ã¦ç›´ã—ã¦ã„ã¾ã™ã€‚</p><p>ï¼ˆä¾¿åˆ©æ©Ÿèƒ½ã¨ã—ã¦ã€ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºæ™‚ã®æ–‡å­—åˆ—çµ„ã¿ç«‹ã¦ã®ä»–ã«ã€å®Ÿè¡Œæ™‚ã«ç¾åœ¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å€¤ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã«ã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚ï¼‰</p><h2 id=ã¾ã¨ã‚ style=font-family:var(--font-serif) class="leading-[1.2] tracking-[-0.02em] text-text-primary mt-[var(--space-md)] mb-[var(--space-md)] scroll-mt-[calc(var(--space-md)*2*1.2)] transition-colors font-medium text-[1.5rem]">ã¾ã¨ã‚</h2><p>Go æ¨™æº–ã® flag ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã ã‘ã§ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¾ã—ãŸã€‚
main.go ã®ã¿ã§ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè£…ã—ãŸã„ã‚“ã ã‘ã©ã€ãŠæ‰‹è»½ã«ãƒ­ãƒ³ã‚°ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸã„ã€ã¨ã„ã†å ´åˆã«ã‚‚ã—ã‹ã™ã‚‹ã¨ä½¿ãˆã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
ï¼ˆäººã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒã‚¤ãƒŠãƒªã‚’æ¸¡ã—ã¦ãƒ˜ãƒ«ãƒ—è¡¨ç¤ºã—ã¦ã‚‚ã‚‰ã£ãŸæ™‚ã«ã€ŒãŠï¼Ÿã€ã¨æ€ã£ã¦ã‚‚ã‚‰ãˆã‚‹ã¨è‰¯ã„ãªã¨æ€ã£ã¦ã¾ã™ï¼‰
ã§ã¯ã§ã¯ã€‚</p></div></article></main><footer class="w-full p-6 border-t border-border bg-surface"><div class="max-w-layout mx-auto flex justify-between items-center text-sm text-text-tertiary"><p>&copy; 2026 xshoji's blog. Crafted in Tokyo. All rights reserved.</p><nav class="social-links flex gap-6"><a href=https://github.com/xshoji target=_blank rel=noopener class="text-text-tertiary font-medium transition duration-150 hover:text-accent border-none">GitHub</a>
<a href=https://x.com/xshoji2020 target=_blank rel=noopener class="text-text-tertiary font-medium transition duration-150 hover:text-accent border-none">X</a>
<a href=/index.xml class="text-text-tertiary font-medium transition duration-150 hover:text-accent border-none">RSS</a></nav></div></footer></body></html>