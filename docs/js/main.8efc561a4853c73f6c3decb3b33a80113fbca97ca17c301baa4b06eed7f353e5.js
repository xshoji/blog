(()=>{(function(){"use strict";let u={HEADER_SCROLL_THRESHOLD:50,HEADER_SCROLL_SENSITIVITY:5,PROGRESS_BAR_HEIGHT:2,PARALLAX_MULTIPLIER:.3,PARALLAX_FADE_MULTIPLIER:1.5,IMAGE_FADE_DURATION:600,CODE_COPY_SUCCESS_DURATION:2e3,COPY_BUTTON_ANIMATION_DURATION:350};(()=>{let o=document.querySelector("header"),e=document.querySelector(".blog-name"),s=document.querySelector(".blog-menu"),t=document.getElementById("translate-banner");if(!o||!e||!s)return;let a=0,c=!1,r=["px-4","py-3","md:p-6"],n=["px-4","py-2","md:px-6","md:py-2"];function i(){let d=window.scrollY||document.documentElement.scrollTop;Math.abs(d-a)>u.HEADER_SCROLL_SENSITIVITY&&(d>u.HEADER_SCROLL_THRESHOLD&&!c?(o.classList.remove(...r),o.classList.add(...n),e.classList.add("scale-[0.9]"),s.classList.add("scale-[0.95]"),t&&(t.classList.remove("py-2"),t.classList.add("pt-0","pb-0")),c=!0):d<=u.HEADER_SCROLL_THRESHOLD&&c&&(o.classList.remove(...n),o.classList.add(...r),e.classList.remove("scale-[0.9]"),s.classList.remove("scale-[0.95]"),t&&(t.classList.remove("pt-0","pb-0"),t.classList.add("py-2")),c=!1)),a=d}function l(){i();let d=!1;window.addEventListener("scroll",()=>{d||(window.requestAnimationFrame(()=>{i(),d=!1}),d=!0)})}return{init:l}})().init(),document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(e=>{let s=e.getAttribute("id");if(!s||e.querySelector(".heading-anchor-wrapper"))return;e.classList.add("group-anchor");let t=document.createElement("div");t.className="inline-flex items-center gap-2";let a=document.createElement("a");a.href=`#${s}`,a.className="text-text-tertiary no-underline border-none inline-flex items-center flex-shrink-0 hover:text-accent",a.setAttribute("aria-label",`Link to ${e.textContent}`),a.innerHTML='<svg class="block" viewBox="0 0 16 16" width="16" height="16"><path fill="currentColor" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>';let c=document.createElement("span");c.className="inline",c.innerHTML=e.innerHTML,e.innerHTML="",t.appendChild(c),t.appendChild(a),e.appendChild(t)}),(()=>{let o=window.matchMedia("(prefers-reduced-motion: reduce)").matches;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(s){let t=this.getAttribute("href"),a=document.querySelector(t);if(!a)return;s.preventDefault();let c=o?"auto":"smooth";a.scrollIntoView({behavior:c,block:"start"}),history.pushState(null,null,t)})})})(),(()=>{if(!document.querySelector("article"))return;let e=document.createElement("div");e.classList.add("progress-bar"),document.body.appendChild(e),window.addEventListener("scroll",()=>{let s=window.innerHeight,t=document.documentElement.scrollHeight,c=window.scrollY/(t-s)*100;e.style.width=Math.min(c,100)+"%"})})(),document.querySelectorAll(".post-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.classList.add("hovering")}),e.addEventListener("mouseleave",function(){this.classList.remove("hovering")})}),document.addEventListener("keydown",o=>{o.key==="Escape"&&window.scrollTo({top:0,behavior:"smooth"})}),(()=>{if(!("IntersectionObserver"in window))return;let o=new IntersectionObserver((e,s)=>{e.forEach(t=>{if(t.isIntersecting){let a=t.target;a.classList.add("loading"),a.dataset.src&&(a.src=a.dataset.src),a.addEventListener("load",()=>{a.classList.remove("loading"),a.classList.add("loaded")}),s.unobserve(a)}})});document.querySelectorAll("img[data-src]").forEach(e=>{o.observe(e)})})(),(()=>{let o=document.querySelector(".hero");o&&window.addEventListener("scroll",()=>{let e=window.scrollY;e<window.innerHeight&&(o.style.transform=`translateY(${e*u.PARALLAX_MULTIPLIER}px)`,o.style.opacity=1-e/window.innerHeight*u.PARALLAX_FADE_MULTIPLIER)})})(),document.querySelectorAll("[data-year]").forEach(e=>{e.textContent=new Date().getFullYear()});let h=(()=>{let o=u.CODE_COPY_SUCCESS_DURATION,e=new WeakMap;function s(r,n){r.dataset.copyState=n;let i=e.get(r);i&&clearTimeout(i),n!=="idle"&&e.set(r,setTimeout(()=>{r.dataset.copyState="idle",e.delete(r)},o))}function t(r){return(r.textContent||"").replace(/\n+$/g,"")}async function a(r){if(navigator.clipboard?.writeText){await navigator.clipboard.writeText(r);return}let n=document.createElement("textarea");n.value=r,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}function c(){document.querySelectorAll("pre > code").forEach(r=>{let n=r.parentElement;if(!n||n.dataset.copyEnhanced==="true")return;let i=document.createElement("div");i.dataset.codeCopy="",n.parentNode.insertBefore(i,n),i.appendChild(n);let l=document.createElement("button");l.type="button",l.className="code-copy-btn",l.dataset.copyButton="",l.dataset.copyState="idle",l.setAttribute("aria-label","Copy code to clipboard"),l.innerHTML='<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="copy-icon"></span><span class="copied-text">Copied!</span>',i.appendChild(l),n.dataset.copyEnhanced="true"}),document.addEventListener("click",async r=>{let n=r.target.closest("[data-copy-button]");if(!n)return;let l=n.closest("[data-code-copy]")?.querySelector("pre > code");if(!l)return;let d=t(l);if(d)try{await a(d),s(n,"copied")}catch(p){console.warn("Copy failed",p),s(n,"error")}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()})();(()=>{let o=document.getElementById("translate-banner"),e=document.getElementById("translate-link"),s=document.getElementById("translate-text");if(!o||!e||!s)return;let t=(navigator.language||navigator.userLanguage||"").split("-")[0].toLowerCase();if(!t||t==="ja")return;let c={en:"Translate this page to English",zh:"\u7FFB\u8BD1\u6B64\u9875\u9762\u4E3A\u4E2D\u6587",ko:"\uC774 \uD398\uC774\uC9C0\uB97C \uD55C\uAD6D\uC5B4\uB85C \uBC88\uC5ED",es:"Traducir esta p\xE1gina al espa\xF1ol",fr:"Traduire cette page en fran\xE7ais",de:"Diese Seite auf Deutsch \xFCbersetzen",pt:"Traduzir esta p\xE1gina para portugu\xEAs",ru:"\u041F\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 \u044D\u0442\u0443 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443 \u043D\u0430 \u0440\u0443\u0441\u0441\u043A\u0438\u0439",ar:"\u062A\u0631\u062C\u0645 \u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062D\u0629 \u0625\u0644\u0649 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",hi:"\u0907\u0938 \u092A\u0947\u091C \u0915\u094B \u0939\u093F\u0902\u0926\u0940 \u092E\u0947\u0902 \u0905\u0928\u0941\u0935\u093E\u0926 \u0915\u0930\u0947\u0902"}[t]||"Translate this page with Google Translate",r="https://translate.google.com/translate?sl=ja&tl="+encodeURIComponent(t)+"&u="+encodeURIComponent(window.location.href);e.href=r,s.textContent=c,o.removeAttribute("hidden")})(),console.log("\u2728 Crafted with precision in Tokyo")})();})();
