(()=>{(function(){"use strict";let i={HEADER_SCROLL_THRESHOLD:50,HEADER_SCROLL_SENSITIVITY:5,PROGRESS_BAR_HEIGHT:2,PARALLAX_MULTIPLIER:.3,PARALLAX_FADE_MULTIPLIER:1.5,IMAGE_FADE_DURATION:600,CODE_COPY_SUCCESS_DURATION:2e3,COPY_BUTTON_ANIMATION_DURATION:350};(()=>{let t=document.querySelector("header"),e=document.querySelector(".blog-name"),c=document.querySelector(".blog-menu");if(!t||!e||!c)return;let a=0,n=!1;function l(){let r=window.scrollY||document.documentElement.scrollTop;Math.abs(r-a)>i.HEADER_SCROLL_SENSITIVITY&&(r>i.HEADER_SCROLL_THRESHOLD&&!n?(t.classList.add("pt-xs"),t.classList.add("pb-xs"),t.classList.add("pr-md"),t.classList.add("pl-md"),e.classList.add("scale-85"),c.classList.add("scale-85"),n=!0):r<=i.HEADER_SCROLL_THRESHOLD&&n&&(t.classList.remove("pt-xs"),t.classList.remove("pb-xs"),t.classList.remove("pr-md"),t.classList.remove("pl-md"),t.classList.add("p-md"),e.classList.remove("scale-85"),c.classList.remove("scale-85"),n=!1)),a=r}function o(){l();let r=!1;window.addEventListener("scroll",()=>{r||(window.requestAnimationFrame(()=>{l(),r=!1}),r=!0)})}return{init:o}})().init(),document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(e=>{let c=e.getAttribute("id");if(!c||e.querySelector(".heading-anchor-wrapper"))return;let a=document.createElement("div");a.className="heading-anchor-wrapper";let n=document.createElement("a");n.href=`#${c}`,n.className="heading-anchor-link",n.setAttribute("aria-label",`Link to ${e.textContent}`),n.innerHTML='<svg viewBox="0 0 16 16" width="16" height="16"><path fill="currentColor" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg>';let l=document.createElement("span");l.className="heading-content",l.innerHTML=e.innerHTML,e.innerHTML="",a.appendChild(l),a.appendChild(n),e.appendChild(a),e.style.cursor="pointer",e.addEventListener("click",o=>{if(o.target.closest(".heading-anchor-link"))return;o.preventDefault();let r=new URL(window.location);r.hash=c,window.history.pushState({},"",r),e.scrollIntoView({behavior:"smooth",block:"start"})})}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();let c=document.querySelector(this.getAttribute("href"));c&&c.scrollIntoView({behavior:"smooth",block:"start"})})}),(()=>{if(!document.querySelector("article"))return;let e=document.createElement("div");e.classList.add("progress-bar"),document.body.appendChild(e),window.addEventListener("scroll",()=>{let c=window.innerHeight,a=document.documentElement.scrollHeight,l=window.scrollY/(a-c)*100;e.style.width=Math.min(l,100)+"%"})})(),document.querySelectorAll(".post-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.classList.add("hovering")}),e.addEventListener("mouseleave",function(){this.classList.remove("hovering")})}),document.addEventListener("keydown",t=>{t.key==="Escape"&&window.scrollTo({top:0,behavior:"smooth"})}),(()=>{if(!("IntersectionObserver"in window))return;let t=new IntersectionObserver((e,c)=>{e.forEach(a=>{if(a.isIntersecting){let n=a.target;n.classList.add("loading"),n.dataset.src&&(n.src=n.dataset.src),n.addEventListener("load",()=>{n.classList.remove("loading"),n.classList.add("loaded")}),c.unobserve(n)}})});document.querySelectorAll("img[data-src]").forEach(e=>{t.observe(e)})})(),(()=>{let t=document.querySelector(".hero");t&&window.addEventListener("scroll",()=>{let e=window.scrollY;e<window.innerHeight&&(t.style.transform=`translateY(${e*i.PARALLAX_MULTIPLIER}px)`,t.style.opacity=1-e/window.innerHeight*i.PARALLAX_FADE_MULTIPLIER)})})(),document.querySelectorAll("[data-year]").forEach(e=>{e.textContent=new Date().getFullYear()});let m=(()=>{function t(){let o=document.createElement("button");return o.type="button",o.className="code-copy-btn",o.setAttribute("aria-label","Copy code to clipboard"),o.innerHTML='<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg><span class="copy-icon"></span><span class="copied-text">Copied!</span>',o}function e(o){return o.replace(/\n+$/g,"")}function c(o){o.classList.add("success"),setTimeout(()=>{o.classList.remove("success")},i.CODE_COPY_SUCCESS_DURATION)}function a(o,r){let s=document.createElement("textarea");s.value=o,s.setAttribute("readonly",""),s.style.position="absolute",s.style.left="-9999px",document.body.appendChild(s),s.select();try{document.execCommand("copy"),c(r)}catch(d){console.warn("Copy failed",d)}document.body.removeChild(s)}function n(o,r){let s=e(r.innerText||r.textContent||"");s&&(o.classList.contains("success")||(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(s).then(()=>{c(o)}).catch(()=>{a(s,o)}):a(s,o)))}function l(){document.querySelectorAll("pre > code").forEach(r=>{let s=r.parentElement;if(!s||s.parentElement&&s.parentElement.classList.contains("code-copy-wrapper"))return;let d=document.createElement("div");d.className="code-copy-wrapper",s.parentNode.insertBefore(d,s),d.appendChild(s);let u=t();u.addEventListener("click",()=>n(u,r)),d.appendChild(u)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})();console.log("\u2728 Crafted with precision in Tokyo")})();})();
